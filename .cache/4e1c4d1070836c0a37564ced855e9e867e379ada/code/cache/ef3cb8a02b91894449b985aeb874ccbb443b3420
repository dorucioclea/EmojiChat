{
  "code": "import { CameraFacingKind, MediaStreamKind } from \"./Interface/IMediaDeviceUtil\";\r\nexport class MediaDeviceUtil {\r\n    constructor() {\r\n        this.devices = null;\r\n    }\r\n    async hasMicrophone() {\r\n        const devices = await this.getDevices();\r\n        return this.filterDevices(devices, \"audioinput\").length > 0;\r\n    }\r\n    async hasCamera() {\r\n        const devices = await this.getDevices();\r\n        return this.filterDevices(devices, \"videoinput\").length > 0;\r\n    }\r\n    async getCameraFacingKinds() {\r\n        const devices = await this.getDevices();\r\n        const amount = this.filterDevices(devices, \"videoinput\").length;\r\n        if (amount === 0)\r\n            return [];\r\n        if (amount === 1)\r\n            return [CameraFacingKind.FRONT]; // This is under the assumption that cameras on devices with only 1 camera will always be front-facing.\r\n        return [CameraFacingKind.FRONT, CameraFacingKind.REAR];\r\n    }\r\n    async getStream({ audio, video }) {\r\n        // Normalize the constraints.\r\n        const constraints = {\r\n            audio: audio == null ? false : {\r\n                echoCancellation: true\r\n            },\r\n            video: video == null ? false : {\r\n                facingMode: video\r\n            }\r\n        };\r\n        // Get the stream\r\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n        // Return the stream and the kind of it.\r\n        return {\r\n            stream,\r\n            kind: this.getKind({ audio, video })\r\n        };\r\n    }\r\n    async getDevices(refresh = false) {\r\n        if (this.devices != null && !refresh)\r\n            return this.devices;\r\n        const devices = await navigator.mediaDevices.enumerateDevices();\r\n        this.devices = devices;\r\n        return devices;\r\n    }\r\n    filterDevices(devices, match) {\r\n        return devices.filter(device => device.kind === match);\r\n    }\r\n    getKind({ audio, video }) {\r\n        if (audio != null && audio && video != null && video)\r\n            return MediaStreamKind.AUDIO_AND_VIDEO;\r\n        if (audio != null && audio && !video)\r\n            return MediaStreamKind.AUDIO;\r\n        if (!audio && video != null && video)\r\n            return MediaStreamKind.VIDEO;\r\n        throw TypeError(`${this.constructor.name} could not decide a MediaStreamKind: Neither audio nor video was requested!`);\r\n    }\r\n}\r\n//# sourceMappingURL=MediaDeviceUtil.js.map",
  "map": {
    "version": 3,
    "file": "MediaDeviceUtil.js",
    "sourceRoot": "",
    "sources": [
      "../../../../src/Service/MediaDeviceUtil/MediaDeviceUtil.ts"
    ],
    "names": [],
    "mappings": "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"
  }
}
