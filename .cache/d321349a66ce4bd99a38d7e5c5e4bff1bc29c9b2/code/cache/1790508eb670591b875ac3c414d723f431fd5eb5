{
  "code": "import { EmotionPredictionPrecisionKind } from \"./Interface/IEmotionClassifierUtil\";\r\nexport class EmotionClassifierUtil {\r\n    constructor(model) {\r\n        this.previousParameters = [];\r\n        this.coefficientLength = 0;\r\n        if (model != null)\r\n            this.init(model);\r\n    }\r\n    init(model) {\r\n        this.emotions = Object.keys(model);\r\n        this.model = model;\r\n        this.coefficientLength = this.model[this.emotions[0]].coefficients.length;\r\n    }\r\n    getBlank() {\r\n        return this.emotions.map(emotion => ({ emotion, value: 0.0, precision: EmotionPredictionPrecisionKind.MAYBE }));\r\n    }\r\n    meanPredict(parameters) {\r\n        this.previousParameters.splice(0, this.previousParameters.length === EmotionClassifierUtil.PREVIOUS_PARAMETERS_LIMIT ? 1 : 0);\r\n        this.previousParameters.push(parameters.slice(0));\r\n        if (this.previousParameters.length > (EmotionClassifierUtil.PREVIOUS_PARAMETERS_LIMIT - 1)) {\r\n            const meanParameters = parameters.map(() => 0);\r\n            for (let i = 0; i < this.previousParameters.length; i++) {\r\n                for (let j = 0; j < parameters.length; j++) {\r\n                    meanParameters[j] += this.previousParameters[i][j];\r\n                }\r\n            }\r\n            parameters.forEach((_, index) => meanParameters[index] /= EmotionClassifierUtil.PREVIOUS_PARAMETERS_LIMIT);\r\n            return this.predict(meanParameters);\r\n        }\r\n        else\r\n            return false;\r\n    }\r\n    predict(parameters) {\r\n        return this.emotions.map(emotion => {\r\n            const model = this.model[emotion];\r\n            let score = model.bias;\r\n            for (let i = 0; i < this.coefficientLength; i++) {\r\n                score += model.coefficients[i] * parameters[i + 6];\r\n            }\r\n            const value = 1.0 / (1.0 + Math.exp(-score));\r\n            const precision = value >= EmotionClassifierUtil.CERTAIN_PRECISION_THRESHOLD\r\n                ? EmotionPredictionPrecisionKind.CERTAIN : EmotionPredictionPrecisionKind.MAYBE;\r\n            return { emotion, value, precision };\r\n        });\r\n    }\r\n}\r\nEmotionClassifierUtil.PREVIOUS_PARAMETERS_LIMIT = 10;\r\nEmotionClassifierUtil.CERTAIN_PRECISION_THRESHOLD = 0.6;\r\n//# sourceMappingURL=EmotionClassifierUtil.js.map",
  "map": {
    "version": 3,
    "file": "EmotionClassifierUtil.js",
    "sourceRoot": "",
    "sources": [
      "../../../../src/Service/EmotionClassifierUtil/EmotionClassifierUtil.ts"
    ],
    "names": [],
    "mappings": "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"
  }
}
